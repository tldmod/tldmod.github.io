<!DOCTYPE HTML>
<!-- hi there, have a good read! -->
<html lang=en class=if-mb>
<head>
 <meta charset='utf-8'>

 <meta name=viewport    content='width=device-width, initial-scale=1'>
 <meta name=author      content='swyter'>
 <meta name=description content='Here&#39;s the official mod download page with the latest releases for Warband and Mount&amp;Blade 1.011.'>
 <meta name=keywords    content='the last days of the third age, the last days, mount and blade, mod, lotr, official, download, warband, 1.011, nightly, patches, tolkien, lord of the rings, module, total conversion'>

 <!-- twitter card data thing -->
 <meta name=twitter:card        content='summary_large_image'>
 <meta name=twitter:site        content='@tldmod'>
 <meta name=twitter:title       content='&#171;The Last Days of the Third Age&#187; Nightly patches'>
 <meta name=twitter:description content='Download our latest and finest version from here, our official page.'>
 <meta name=twitter:image       content='http://images.akamai.steamusercontent.com/ugc/630854895415240375/DB817458B3BF31DB00C5EF4130527CF625DC63E6/'>
 <meta name=twitter:creator     content='@swyterzone'>

 <title>The Last Days · Nightly patches</title>

 <!-- random favicon-related stuff -->
 <link rel=icon     href='favicon.ico' sizes='16x16 32x32 48x48'>
 <link rel=manifest href='manifest.json'>

 <meta name=msapplication-TileColor  content='#685555'>
 <meta name=theme-color              content='#dadada'>

 <meta name=google-site-verification content='z8OFLNdGvqrfOABfPEYEipzZbVLmRPQBz6ryF7AZX-M'>
 <meta name=google-site-verification content='76_XklhKj9t-RBUzLkFuM64n7nNAK3TKnDLMIcyIxcM'>

 <!-- keep /index.html out of the picture, just in case -->
 <link rel=canonical href='https://tldmod.github.io/'>
 
 <style>
  @import url(//fonts.googleapis.com/css?family=Merriweather:400,400italic);

  html
  {
    background:#221A18;
    color:#985;
    text-shadow:2px 1px black;
    font-family:cursive;

            user-select:none;
    -webkit-user-select:none;
       -moz-user-select:none;
         -o-user-select:none;

    cursor:default !important;
    font-family: 'Merriweather', garamond, georgia, times, serif;

    background-image: url(img/swyTLDprofile.bg.jpg);
    height:100%;
    width: 100%;
    height: 100%;
    background-repeat:no-repeat;
  }

  /* for screens wider than the background image */
  @media(min-width: 1349px)
  {
    html
    {
      background-position: center center;
      background-size: cover;
    }
  }

  a[href]
  {
    color:inherit;
  }

  body
  {
    max-width:620px;
    margin:0 auto;
    padding:25px;
  }

  ul li
  {
    list-style-type: circle;
  }

  #lang li[lang]:before
  {
    content: "";
    display: inline-block;
    /* background-image: url(img/attr(lang).png); */
    width: 16px;
    height: 11px;
    margin-right: 5px;
  }

  /* shitty CSS3 implementations ftw! */

  #lang li[lang=en]:before
  {
    background-image: url(img/en.png);
  }
  #lang li[lang=es]:before
  {
    background-image: url(img/es.png);
  }
  #lang li[lang=fr]:before
  {
    background-image: url(img/fr.png);
  }
  #lang li[lang=de]:before
  {
    background-image: url(img/de.png);
  }
  #lang li[lang=pl]:before
  {
    background-image: url(img/pl.png);
  }
  #lang li[lang=ja]:before
  {
    background-image: url(img/ja.png);
  }
  #lang li[lang=ru]:before
  {
    background-image: url(img/ru.png);
  }
  #lang li[lang=it]:before
  {
    background-image: url(img/it.png);
  }

  #ul
  {
    list-style: none;
    margin: 0;
  }

  #mab1011, #warband
  {
    display: inline-block;
    background-repeat: no-repeat;
    padding-left: 36px;
    height: 32px;
  }

  #mab1011
  {
    background-image: url(img/icon-mab1011.png);
  }

  #warband
  {
    background-image: url(img/icon-warband.png);
  }

  input
  {
    left: -15px;
    position: relative;
    top: 22px;
    display: block;
  }

  label span
  {
    position: relative;
    top: -10px;
    padding: 10px;
  }

  ol span, .download
  {
    display: block;
    padding-left: 20px;
    margin-left: 20px;
    margin-top: 10px;
    padding-bottom: 20px;
    background-image: url(img/download.gif);
    background-repeat: no-repeat;
  }

  .if-wb       if-mb, /* if we want warband don't show mb1011 */
  .if-mb       if-wb, /* if we want mb1011 don't show warband */
                 mac, /* don't show me mac text by default :) */
  .if-wb.mac not-mac  /* don't show the other wb stuff in mac */
  {
    display: none;
  }

  /* show only the mac notice if warband is selected */
  .if-wb.mac mac
  {
    display: inline;
  }

  #links
  {
    text-align:center;
  }

  noscript
  {
    position: fixed;
    display: block;
    bottom: 20px;
    margin-left: 20px;
    left: 0;
    width: 80%;
    background: rgba(0,0,0,.9);
    padding: 14px;
    border: 2px solid;
    border-radius: 5px;
    box-shadow: 2px 2px;
  }

  /* html5 tags compatibility for older browsers */
  section, article, aside, footer, header, nav, hgroup
  {
    display:block;
  }

  abbr
  {
    border-bottom: 1px dotted rgba(255, 255, 255, 0.1);
    display: inline-block;
    line-height: 15px;
  }

  p
  {
    line-height: 1.5em;
  }
  
  /* make the text-ad banner thing a bit more apparent,
     separating it from the content */
  ins.adsbygoogle
  {
    border: 1px solid;
  }
  ins.adsbygoogle:after
  {
    display: inline-block;
    font-size: x-small;
    font-family: sans-serif;
    content: 'this is an unobstrusive ad to get some revenue <3';
    background: #985;
    text-shadow: none;
    position: relative;
    color: black;
    border-radius: 0 0 10px 0;
    padding: 1px 8px;
    float: left;
    margin-top: -4px;
    margin-left: -1px;
  }
 </style>
</head>
<body role=main>
 <header>
  <h1><em>The Last Days</em> nightly patches!</h1>
 </header>
 <p>
  <em>The Last Days of the Third Age</em> is a long-standing, community-developed Tolkien-based mod for <em>Mount&amp;Blade</em> and <em>Mount&amp;Blade Warband</em>.
 </p>
 <p>
  Nightly patches are automatically generated development builds baked by a helpful bot, which you can use to stay on the bleeding edge.<br/><br/>
  They come with the latest changes, enhancements and bug fixes, we are using a <em>rolling release</em> model so that you can stay on the loop.
 </p>
 <section id=languages>
  <h3>Included languages:</h3>
  <ul id=lang>
     <li lang=en>English</li>
     <li lang=es>Castellano</li>
     <li lang=fr>Français</li>
     <li lang=de>Deutsch</li>
     <li lang=ja>日本語</li>
     <li lang=ru>Русский</li>
     <li lang=pl>Polski (89%)</li>
     <li lang=it>Italiano (62%)</li>
     <li>
      <a href=https://transifex.com/projects/p/tld/ target=tab>Want to contribute?</a>
     </li>
  </ul>
 </section>

 <section id=instructions role=form>
  <h1>INSTRUCTIONS</h1>

  <label id=mab1011>
    <input id=mb name=dummy type=radio title='Select this to switch to the original game instructions.'>
    <span>Mount&amp;Blade 1.011</span>
  </label>
  <label id=warband>
    <input id=wb name=dummy type=radio title='Select this to switch to the Warband-related instructions.'>
    <span>Mount&amp;Blade Warband</span>
  </label>

  <ol>
    <li>Latest standalone version of the mod — <em>TLD_3.3.7z</em>
      <span>
        Download from
        <a href=https://bitbucket.org/Swyter/tld-downloads/downloads/TLD_3.3.7z>Bitbucket</a> or
        <a href=http://www.moddb.com/mods/the-last-days/downloads/the-last-days-of-the-third-age-33#subheader>ModDB</a>.
      </span>
    </li>

    <if-wb>
    <li>
     Warband compatibility patch. — <em>TLD_3.3_wbcompat.7z</em>
      <span>
        Download from
        <a href=https://bitbucket.org/Swyter/tld-downloads/downloads/TLD_3.3_wbcompat.7z>Bitbucket</a> or
        <a href=http://www.moddb.com/mods/the-last-days/downloads/the-last-days-of-the-third-age-33-warband-patch#subheader>ModDB</a>.
      </span>
    </li>
    </if-wb>

    <li>
      Latest nightly patch for <if-wb>Warband</if-wb><if-mb>M&amp;B 1.011</if-mb> (from <if-wb><em id=nightly_date_warband>2015/04/23 *checking*</em></if-wb><!--
                                                                                     --><if-mb><em id=nightly_date_mab1011>2015/04/23 *checking*</em></if-mb>)
      <span>
        Download from
        <if-wb>
          <a href=https://bitbucket.org/Swyter/tld-downloads/downloads/TLD_3.3_wbcompat_nightly_patch_2015.04.23-14.13_r2043.7z id=nightly_link_warband>Bitbucket</a>
        </if-wb>
        <if-mb>
          <a href=https://bitbucket.org/Swyter/tld-downloads/downloads/TLD_3.3_nightly_patch_2015.04.23-14.13_r2043.7z id=nightly_link_mab1011>Bitbucket</a>
        </if-mb>
        <a href=https://bitbucket.org/Swyter/tld-downloads/downloads/ target=tab><em>(see more)</em></a>.
      </span>
    </li>
  </ol>

  <p>
    <b><em>To install:</em></b>
    <not-mac>
    Extract them sequentially, dragging and dropping a <em><abbr title='The Last Days of the Third Age'>TLD</abbr></em> directory inside of the

    <!-- if you think that those *blank comments* are a bit fishy and unsightly, welcome to utopia land!
         they are there to hide carriage returns to the markup parser, otherwise adds extra spaces between words -->
    <if-mb>
      <abbr title='By default the game is installed either in &#10;  «C:\Program Files\Steam\SteamApps\common\mount and blade\modules\»&#10; for the Steam version or &#10;  «C:\Program Files (x86)\Mount&amp;Blade\modules\»&#10; for the standalone version.'>
       <em>Modules</em> folder of the game<!--
   --></abbr><!--
  --></if-mb><!--

  --><if-wb>
      <abbr title='By default the game is installed either in &#10;  «C:\Program Files (x86)\Steam\SteamApps\common\mountblade warband\modules\»&#10; for the Steam version or &#10;  «C:\Program Files (x86)\Mount&amp;Blade Warband\modules\»&#10; for the standalone version. &#10; Linux users who use Steam should install it in «~/.steam/steam/steamapps/common/MountBlade Warband/Modules»'>
       <em>Modules</em> folder of the game<!--
    --></abbr><!--
  --></if-wb>, overwriting time after time.

    <if-mb>Once you are done, navigate into the <em><abbr title='The Last Days of the Third Age'>TLD</abbr></em> folder, copy a file called <em>dinput8.dll</em>, go up a few times and paste it next to <em>Mount&amp;Blade.exe</em>, into the game's root.</if-mb>

    Then just select the mod from the launcher's drop-down list and play.
    
    </not-mac>
    <!-- here's our mac notice, for those stylish special snowflakes -->
    <mac><!--
   -->Mac OS X users have the buggiest version of the game, a few workarounds are needed to play our mod, <a href="http://steamcommunity.com/workshop/filedetails/discussion/299974223/361787186436486677/#forum_op_361787186436486677">follow our Mac installation guide.</a>
    </mac>
  </p>

  <nav>
    <p id=links role=navigation>
      <a href=https://trello.com/b/ntzYNdEA/             title='Visit the place where we organize ourselves.'        target=tab>To-do list</a> |
      <a href=http://synnaskole.sweb.cz/TLDManual3.3.pdf title='Visit the comprehensive PDF help file.'              target=tab>Manual</a> |
      <a href=http://moddb.com/mods/the-last-days/       title='Visit the place where our players rate and comment.' target=tab>ModDB profile</a> |
      <a href=http://goo.gl/yIw0od                       title='Subscribe for automatic mod updates.'                target=tab>Steam Workshop</a> |
      <a href=https://twitter.com/tldmod                 title='Visit the place where we keep you updated.'          target=tab>Twitter</a>
    </p>
  </nav>
 </section>

 <!-- testing the addition of a small ad, just for kicks -->
 <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-2054328004027360"
      data-ad-slot="2739187532"
      data-ad-format="auto" role="banner"></ins>
 <script>
   (adsbygoogle = window.adsbygoogle || []).push({});
 </script>

 <noscript>
   Hi. This page kind of uses JavaScript to grab the list of downloads and find the latest one.<br/>
   <br/>
   You don't seem to have it (enabled), so the download links that you'll obtain are from 2014/10/03,
   which were the most current ones at the time of me typing this,
   and may or may not be updated at yours, person of the future! :)<br/>
   <br/>
   Respectful about your browsing preferences and... well... umm... elegantly yours.<br/>
   --swyter *bows*
 </noscript>
 <script>

  /* set either the `.if_wb` or the `.if_mb` class to the root element,
     so that the css picks it up and conditionally hides whatever it needs to */
  window.onchange=function(e)
  {
    localStorage["selected_instruction"] = e.target.id;

    document.documentElement.classList.add(   e.target.id=="wb" ? "if-wb" : "if-mb");
    document.documentElement.classList.remove(e.target.id=="wb" ? "if-mb" : "if-wb");
  }

  /* hacky workaround to get it working at loading time, hell yeah! */
  var cur = localStorage["selected_instruction"] || "wb";

  document.getElementById(cur).click();
  window.onchange({ target: {id: cur} });

  /* we'll show a different description if we are on a mac and want warband */
  if (navigator.platform.toLowerCase().contains("mac"))
  {
    document.documentElement.classList.add('mac');
  }
  
  /* swyter-- tiny custom made json callback, don't judge me :) */
  function shitty_jsonp(url, callback)
  {
    random_id = "CB" + (+new Date());

    this.window[random_id] = function(json)
    {
      if(typeof callback === "function")
      {
        callback.apply(this, arguments);
      }

      else
      {
        throw "you suck! a callback function soup is needed to run this!";
      }

      /* remove the temp script thingie */
      document.head.removeChild(jsonp);

      /* remove itself */
      delete window[random_id];
    };

    jsonp=document.createElement("script");
    jsonp.setAttribute("src","//whateverorigin.herokuapp.com/get?url="+url+"&callback="+random_id);

    document.head.appendChild(jsonp);
  }

  /* here's the real meal V */
  shitty_jsonp("http://bitbucket.org/Swyter/tld-downloads/downloads", function(json)
  {
    console.log("Starting to scrape the TLD downloads page & table!\n");

    window.bb_downloads = (new DOMParser).parseFromString(json.contents, "text/html");
    window.bb_uploads_table = bb_downloads.getElementById("uploaded-files");

    /* grab the array of elements in the table */
    window.bb_uploads_table = bb_uploads_table.children[1].children;

    /* default paleolithic date to compare against */
    window.mb_date = new Date("1992-01-01");
    window.wb_date = new Date("1992-01-01");

    for(child in bb_uploads_table)
    {

      if(typeof bb_uploads_table[child] === 'object')
      {
        //console.log(bb_uploads_table[child]);

        var cur_date = new Date(bb_uploads_table[child].getElementsByTagName('time')[0].attributes["datetime"].textContent);
        var cur_href = bb_uploads_table[child].getElementsByClassName("execute")[0].attributes["href"].textContent;

        if (cur_date && cur_href)
        {
          /* mab1011 link? */
          if(cur_href.indexOf("TLD_3.3_nightly_patch_") != -1)
          {
            //console.log("This is a mab1011 link!");
            //console.log((+cur_date) +" "+ (+mb_date));

            if(+cur_date > +mb_date)
            {
              //console.log("mb newest to date!");

              window.mb_date = cur_date;
              window.mb_href = cur_href;
            }

          }
          /* warband link? */
          else if(cur_href.indexOf("TLD_3.3_wbcompat_nightly_patch_") != -1)
          {
            //console.log("This is a warband link!");

            if(+cur_date > +wb_date)
            {
              //console.log("wb newest to date!");

              window.wb_date = cur_date;
              window.wb_href = cur_href;
            }
          }
        }

      }
    }

    console.log("Finished!\n--");

    if(wb_href && mb_href)
    {
      console.log("latest Warband nightly URL: "+ wb_href +", uploaded on "+ wb_date);
      console.log("latest MB 1011 nightly URL: "+ mb_href +", uploaded on "+ mb_date);

      /* probably a fine example of why js sucks,
         try to format dates in a compact way w/o ending churning out spaguetti code */

      document.getElementById("nightly_date_mab1011").textContent =             mb_date.getFullYear()            + "/" +
                                                                   ( "0" + (1 + mb_date.getMonth()) ).substr(-2) + "/" +
                                                                   ( "0" +      mb_date.getDate()   ).substr(-2);

      document.getElementById("nightly_date_warband").textContent =             wb_date.getFullYear()            + "/" +
                                                                   ( "0" + (1 + wb_date.getMonth()) ).substr(-2) + "/" +
                                                                   ( "0" +      wb_date.getDate()   ).substr(-2);

      /* replace the static links with the latest scrapped ones */
      document.getElementById("nightly_link_mab1011").href = "https://bitbucket.org" + mb_href;
      document.getElementById("nightly_link_warband").href = "https://bitbucket.org" + wb_href;
    }

    else
    {
      console.error("the bb downloads page couldn't be scrapped! :(");
    }

  });

  /*
   * DOMParser HTML extension
   * 2012-09-04
   *
   * By Eli Grey, http://eligrey.com
   * Public domain.
   * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
   */

  /*! @source https://gist.github.com/1129031 */
  /*global document, DOMParser*/

  (function(DOMParser) {
    "use strict";

    var DOMParser_proto = DOMParser.prototype;
    var real_parseFromString = DOMParser_proto.parseFromString;

    // Firefox/Opera/IE throw errors on unsupported types
    try
    {
      // WebKit returns null on unsupported types
      if ((new DOMParser).parseFromString("", "text/html"))
      {
        // text/html parsing is natively supported
        return;
      }
    } catch (ex) {}

    DOMParser_proto.parseFromString = function(markup, type) {
      if (/^\s*text\/html\s*(?:;|$)/i.test(type))
      {
        var doc = document.implementation.createHTMLDocument("");

        if (markup.toLowerCase().indexOf('<!doctype') > -1)
        {
          doc.documentElement.innerHTML = markup;
        }
        else
        {
          doc.body.innerHTML = markup;
        }
        return doc;
      }
      else
      {
        return real_parseFromString.apply(this, arguments);
      }

    };
  }(DOMParser));

 </script>
</body>
</html>
